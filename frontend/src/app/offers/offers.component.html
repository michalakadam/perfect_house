<div class="component-container" *ngIf="offersStateManager.currentSearchOffers$ | async as offers">
  <div class="tools-container">
    <perfect-search-tool
      [filters]="currentFilters"
			[rawVoivodeshipsWithCounties]="offersStateManager.voivodeshipsWithCounties$ | async"
			[rawEstateTypesWithSubtypes]="offersStateManager.estateTypesWithSubtypes$ | async"
			[lowestPriceForCurrentSearch]="offersStateManager.lowestPriceForCurrentSearch$ | async"
			[highestPriceForCurrentSearch]="offersStateManager.highestPriceForCurrentSearch$ | async"
      (searchOffers)="loadNewResults(0, currentSorting, $event)"
      (openOffer)="loadOffer($event)"
    >
    </perfect-search-tool>

    <div class="other-tools-container">
      <perfect-sorting-tool
        [offersQuantity]="offers.length"
        [selectedSorting]="currentSorting"
        (sortingChanged)="loadNewResults(currentPage, $event, currentFilters)"
      >
      </perfect-sorting-tool>

      <div class="top-paginator" *ngIf="(offersStateManager.numberOfPages$ | async) > 0">
        <perfect-paginator
          [offersPerPage]="offersPerPage"
          [totalOffersQuantity]="offers.length"
          [selectedPage]="currentPage"
          (pageChanged)="loadNewResults($event, currentSorting, currentFilters)"
        >
        </perfect-paginator>
      </div>
    </div>
  </div>

  <div
    class="no-offers-prompt"
    *ngIf="offers.length === 0 && agentsDao.getAgentById(1155) as agent"
  >
    <perfect-agent-brief
      *ngIf="!windowSizeDetector.isWindowSmallerThanDesktopSmall"
      [agent]="agent"
      onlyPhoto
      bigger
    >
    </perfect-agent-brief>
    <div class="prompt">
      <h2>Brak ofert spełniających podane kryteria.</h2>
      <h4>
        Skontaktuj się z nami! Korzystając z naszego doświadczenia, pomożemy Ci
        znaleźć to, czego szukasz.
      </h4>
      <div class="contact-info-container">
        <a href="mailto:{{ agent.mail }}">
          <mat-icon><i class="fas fa-envelope-square"></i></mat-icon>
          {{ agent.mail }}
        </a>
        <a href="tel:{{ agent.mobile }}">
          <mat-icon><i class="fas fa-phone-square-alt"></i></mat-icon>
          {{ agent.mobile }}
        </a>
      </div>
    </div>
  </div>

  <perfect-offer-card
    *ngFor="let offer of offers; trackBy: trackById"
    [offer]="offer"
    (click)="loadOffer(offer.symbol)"
  ></perfect-offer-card>

  <div class="bottom-paginator">
    <perfect-paginator
       *ngIf="(offersStateManager.numberOfPages$ | async) > 0"
      class="bottom-paginator"
      [offersPerPage]="offersPerPage"
      [totalOffersQuantity]="offers.length"
      [selectedPage]="currentPage"
      (pageChanged)="loadNewResults($event, currentSorting, currentFilters)"
    >
    </perfect-paginator>
  </div>
</div>

<div class="snackbar-container" *ngIf="isSnackbarVisible">
  <div class="snackbar-content">
    <span>{{ snackbarContent }}</span>
    <i class="pi pi-times close-icon" (click)="isSnackbarVisible = false"></i>
  </div>
</div>
